<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PHAZE Menu</title>
<style>
body {margin:0;overflow:hidden;display:flex;justify-content:flex-start;align-items:center;height:100vh;background:rgba(0,0,0,0);padding-left:25px;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
.menu-wrapper{display:flex;align-items:center;}
.menu-container{width:375px;background:#000000e5;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,0.5);display:flex;flex-direction:column;overflow:hidden;position:relative;}
.header-image{width:100%;height:90px;object-fit:cover;object-position:center;display:block;}
.menu-header{background:rgba(0,0,0,0.8);color:white;font-size:13px;padding:3px;font-weight:600;text-align:center;text-transform:uppercase;letter-spacing:1px;}
.menu-items-container{display:flex;align-items:flex-start;padding:3px;overflow:hidden;position:relative;transition:height 0.3s ease;}
.scrollbar-container{flex-shrink:0;width:8px;background:#111;border-radius:20px;margin-right:8px;box-shadow:inset 0 0 3px #000;position:relative;top:0;}
.scrollbar-thumb{width:100%;height:40px;background:#2c596b;border-radius:20px;position:absolute;top:0;transition:top 0.2s ease-in-out;}
.menu-items{display:flex;flex-direction:column;gap:3px;transition:transform 0.3s ease;width:100%;}
.menu-item{padding:6px 10px;color:white;font-size:12px;font-weight:bold;cursor:pointer;background-color:transparent;transition:all 0.2s ease;border-radius:4px;display:flex;justify-content:space-between;align-items:center;}
.menu-item:hover,.menu-item.selected{background-color:#0c2a3c;box-shadow:inset 0 0 0 1px #2d4555;}
.menu-item .submenu-indicator{color:#4a90e2;font-size:11px;}
.submenu-inner{display:none;flex-direction:column;gap:3px;width:100%;height:100%;}
.submenu-inner.active{display:flex;}
.submenu-header{display:flex;align-items:center;padding:8px 10px;color:white;font-weight:bold;background:rgba(0,0,0,0.8);border-bottom:1px solid #2d4555;font-size:12px;}
.submenu-back{margin-right:8px;cursor:pointer;color:#4a90e2;}
.menu-footer{background:rgba(0,0,0,0.8);color:white;font-size:11px;padding:6px 8px;display:flex;justify-content:space-between;align-items:center;}
.right-text{font-weight:bold;}
.notification{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.8);color:white;padding:8px 16px;border-radius:5px;font-size:12px;opacity:0;transition:opacity 0.3s;pointer-events:none;}
.notification.show{opacity:1;}
</style>
</head>
<body>
<div class="menu-wrapper">
<div class="menu-container">
<img class="header-image" src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExaXlxdXl0cHNnY29jeW1vNzUzb200M25yeG82em0zbTd2c2t4aWxpeiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/xA1wn6UBF0bNngIczk/giphy.gif" alt="Menu Banner">
<div class="menu-header" id="menu-header">SELF</div>
<div class="menu-items-container" id="menu-items-container">
<div class="scrollbar-container">
<div class="scrollbar-thumb" id="scrollbar-thumb"></div>
</div>

<!-- Main Menu -->
<div class="menu-items" id="main-menu">
<div class="menu-item selected" data-submenu="self-submenu" data-title="SELF">Self <span class="submenu-indicator">→</span></div>
<div class="menu-item" data-submenu="players-submenu" data-title="PLAYERS">Players <span class="submenu-indicator">→</span></div>
<div class="menu-item" data-submenu="visuals-submenu" data-title="VISUALS">Visuals <span class="submenu-indicator">→</span></div>
<div class="menu-item" data-submenu="combat-submenu" data-title="COMBAT">Combat <span class="submenu-indicator">→</span></div>
<div class="menu-item" data-submenu="weapons-submenu" data-title="WEAPONS">Weapons <span class="submenu-indicator">→</span></div>
<div class="menu-item" data-submenu="vehicles-submenu" data-title="VEHICLES">Vehicles <span class="submenu-indicator">→</span></div>
<div class="menu-item" data-submenu="misc-submenu" data-title="MISC">Miscellaneous <span class="submenu-indicator">→</span></div>
<div class="menu-item" data-submenu="server-submenu" data-title="SERVER">Server <span class="submenu-indicator">→</span></div>
<div class="menu-item" id="settings-tab" data-title="SETTINGS">Settings <span class="submenu-indicator">→</span></div>
</div>

<!-- Settings Submenu -->
<div class="submenu-inner" id="settings-submenu">
<div class="submenu-header"><span class="submenu-back" onclick="closeSubmenu()">←</span><span class="submenu-title">Settings</span></div>
<div class="menu-item" id="open-banners" data-title="BANNERS">Banners <span class="submenu-indicator">→</span></div>
</div>

<!-- Banners Submenu -->
<div class="submenu-inner" id="banners-submenu">
<div class="submenu-header"><span class="submenu-back" onclick="openSubmenu('settings-submenu')">←</span><span class="submenu-title">Banners</span></div>
<div id="banners-menu-items" style="display:flex;flex-direction:column;gap:3px;width:100%;"></div>
</div>

</div>
<div class="menu-footer">
Version: Beta | 24hrs ago <span class="right-text" id="menu-counter">1/9</span>
</div>
</div>
</div>

<div class="notification" id="notification">Feature activated</div>

<script>
const notification=document.getElementById('notification');
const headerImage=document.querySelector('.header-image');
const menuContainer=document.getElementById('menu-items-container');
const menuHeader=document.getElementById('menu-header');
let currentMenu='main-menu';
let selectedIndex=0;

// Submenu functions
function resizeMenu(menuId){
    const menu=document.getElementById(menuId);
    const items=menu.querySelectorAll('.menu-item');
    const itemHeight=items[0]?.offsetHeight||30;
    const headerHeight=menu.querySelector('.submenu-header')?.offsetHeight||0;
    const padding=6;
    const gap=3;
    const height=items.length*(itemHeight+gap)+padding+headerHeight;
    menuContainer.style.height=height+'px';
    // Adjust scrollbar thumb height
    const thumbHeight=Math.max(20, menuContainer.offsetHeight/items.length);
    document.getElementById('scrollbar-thumb').style.height=thumbHeight+'px';
}
function openSubmenu(id){
    document.getElementById('main-menu').style.display='none'; 
    document.querySelectorAll('.submenu-inner').forEach(sm=>sm.classList.remove('active'));
    const submenu=document.getElementById(id);
    submenu.classList.add('active');
    currentMenu=id; 
    selectedIndex=0;
    resizeMenu(id); 
}
function closeSubmenu(){
    document.querySelectorAll('.submenu-inner').forEach(sm=>sm.classList.remove('active'));
    document.getElementById('main-menu').style.display='flex'; 
    currentMenu='main-menu';
    selectedIndex=0;
    resizeMenu('main-menu'); 
}

// Click handlers
document.getElementById('settings-tab').onclick=()=>openSubmenu('settings-submenu');
document.getElementById('open-banners').onclick=()=>openSubmenu('banners-submenu');

// Banners
const banners=[
{name:"Default",url:"https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExaXlxdXl0cHNnY29jeW1vNzUzb200M25yeG82em0zbTd2c2t4aWxpeiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/xA1wn6UBF0bNngIczk/giphy.gif"},
{name:"Banner 1",url:"https://cdn.discordapp.com/attachments/1315019666489348167/1396812136340127795/image.png?ex=689f162c&is=689dc4ac&hm=f31b342d54a90421ce70cfc55e970e985c9376aa9ca89c90c1bda4e134556c03&"},
{name:"Banner 2",url:"https://cdn.discordapp.com/attachments/1315019666489348167/1384643568840343633/linky_banner.png?ex=689fa450&is=689e52d0&hm=3413f2b3df7898f8d7d2ea3d8db67f8747538b051230d04d2cc40d47e6bc210a&"},
{name:"buuckzgz",url:"https://cdn.discordapp.com/attachments/1193166390933340273/1377130600401604679/buuckzhuhh.gif?ex=68a0a790&is=689f5610&hm=29f462f7d64ff03f4ece38711b7b29f35f810120f42100c8152728548a7d292b&"}
];
const bannersMenu=document.getElementById('banners-menu-items');
banners.forEach(b=>{
    const item=document.createElement('div');
    item.className="menu-item";
    item.textContent=b.name;
    item.onclick=()=>{headerImage.src=b.url; notification.textContent=`${b.name} selected`; notification.classList.add('show'); setTimeout(()=>notification.classList.remove('show'),2000);}
    bannersMenu.appendChild(item);
});

// Scrollbar / Navigation
const scrollbarThumb=document.getElementById('scrollbar-thumb');
const menuCounter=document.getElementById('menu-counter');
const maxScrollHeight=245;

function updateMenuSelection(direction){
    const menuElement=document.getElementById(currentMenu);
    const currentItems=menuElement.querySelectorAll('.menu-item');
    if(!currentItems.length) return;
    currentItems[selectedIndex].classList.remove('selected');
    selectedIndex=(selectedIndex+direction+currentItems.length)%currentItems.length;
    currentItems[selectedIndex].classList.add('selected');
    // Update header dynamically
    menuHeader.textContent=currentItems[selectedIndex].dataset.title||currentItems[selectedIndex].textContent;
    const scrollStep=(menuContainer.offsetHeight-currentItems[0].offsetHeight)/(currentItems.length-1||1);
    scrollbarThumb.style.top=`${selectedIndex*scrollStep}px`;
    menuCounter.textContent=`${selectedIndex+1}/${currentItems.length}`;
}

// Handle messages from FiveM
window.addEventListener("message", e=>{
    const data=e.data;
    if(data.type==="navigate"){
        const menuElement=document.getElementById(currentMenu);
        const currentItems=menuElement.querySelectorAll('.menu-item');
        if(!currentItems.length) return;

        if(data.direction==="up") updateMenuSelection(-1);
        else if(data.direction==="down") updateMenuSelection(1);
        else if(data.direction==="enter"){
            const selectedItem=currentItems[selectedIndex];
            if(selectedItem.id==="settings-tab") openSubmenu('settings-submenu');
            else if(selectedItem.id==="open-banners") openSubmenu('banners-submenu');
            else selectedItem.click();
        }
        else if(data.direction==="back"){
            closeSubmenu();
        }
    }
});

// Initial setup
resizeMenu('main-menu');
updateMenuSelection(0);
</script>
</body>
</html>
